## ğŸ› ï¸ **Common Network Troubleshooting Steps for Amazon VPC**

*A clear, visual, step-by-step checklist for when your public EC2 app wonâ€™t load*

![Image](https://docs.aws.amazon.com/images/vpc/latest/userguide/images/vpc-example-private-subnets.png)

![Image](https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2020/03/19/Slide1.png)

![Image](https://cloudviz.io/assets/aws-security-group-vs-nacl/security-groups.png)

![Image](https://media.geeksforgeeks.org/wp-content/uploads/20230918171703/AWS-Nacl-vs-Security-group.png)

When a **web application on an EC2 instance** doesnâ€™t open in the browser, the problem is almost **never just one thing**.
In **Amazon Virtual Private Cloud**, internet access depends on **multiple layers working together**.

Think of this like a **pipeline** ğŸŒŠ
If *any* valve is closed â†’ traffic stops.

---

# ğŸ§  Mental Model (Visualize First)

```
Internet
  â†“
Internet Gateway (IGW)
  â†“
Route Table
  â†“
Subnet (NACL)
  â†“
EC2 Instance (Security Group)
  â†“
Application + Web Server
```

Now letâ€™s **debug this pipeline from top to bottom** ğŸ‘‡

---

## âœ… 1. Internet Gateway (IGW)

### ğŸ” What to check

* Is an **Internet Gateway attached** to your VPC?

### âŒ Common failure

* IGW exists but is **not attached** to the VPC

### âœ… Why it matters

Without an IGW:

> ğŸš« **No traffic can enter or leave the VPC**

ğŸ“Œ VPC â†’ **Internet Gateway = door to the internet**

---

## âœ… 2. Route Tables (Subnet Routing)

### ğŸ” What to check

Look at the **route table associated with your EC2 subnet**.

You must see:

```
Destination: 0.0.0.0/0
Target: Internet Gateway
```

### âŒ Common failure

* Route exists in a different route table
* Subnet is associated with the **wrong route table**

### âœ… Why it matters

> The IGW lets traffic *in*, but the route table tells traffic *where to go*

---

## âœ… 3. Security Groups (Instance Firewall)

### ğŸ” What to check

On the EC2 security group, verify **inbound rules**:

| Protocol | Port | Source    |
| -------- | ---- | --------- |
| HTTP     | 80   | 0.0.0.0/0 |
| HTTPS    | 443  | 0.0.0.0/0 |

Outbound:

* Usually **Allow All** (default)

### âŒ Common failures

* Port 80/443 missing
* Source too restrictive (not `0.0.0.0/0`)

### âœ… Why it matters

Security groups are:

* **Stateful**
* Default = **deny all inbound**

ğŸ“Œ No rule = no traffic

---

## âœ… 4. Network ACLs (Subnet Firewall)

### ğŸ” What to check

Ensure **both inbound AND outbound** rules allow traffic.

Example (HTTP/HTTPS):

**Inbound**

* Allow TCP 80 / 443

**Outbound**

* Allow TCP **1025â€“65535** (ephemeral ports)

### âŒ Common failure

* Inbound allowed, outbound blocked

### âœ… Why it matters

Network ACLs are:

* **Stateless**
* Require **explicit inbound + outbound rules**

ğŸ“Œ Response traffic uses **ephemeral ports**

---

## âœ… 5. Public IP Address

### ğŸ” What to check

Your EC2 instance must have:

* A **public IPv4 address** or **Elastic IP**

Check in the **Amazon EC2 console â†’ Instance details**

### âŒ Common failure

* Instance launched without public IP
* Subnet setting disables auto-assign public IP

### âœ… Why it matters

No public IP =

> ğŸŒ Internet has no idea where your instance is

---

## âœ… 6. HTTP vs HTTPS Mismatch

### ğŸ” What to check

* Is your app using **HTTP or HTTPS**?
* Does your browser URL match?

Example:

```
http://<public-ip>
```

### âŒ Common failures

* Browser auto-forces HTTPS
* SSL not configured but HTTPS used

### âœ… Course-specific reminder

ğŸ“Œ **This app uses HTTP**
Make sure the URL starts with:

```
http://
```

---

## âœ… 7. User Data Script (Boot-Time Setup)

### ğŸ” What to check

If you used **user data**, verify it ran successfully.

Check logs:

```bash
/var/log/cloud-init.log
/var/log/cloud-init-output.log
```

### âŒ Common failures

* Script error
* Package install failed
* Web server never started

### âœ… Why it matters

If Apache/Nginx never installed â†’ nothing to serve

---

## âœ… 8. IAM Permissions (Roles & Policies)

### ğŸ” What to check

Does the EC2 instance role allow access to:

* S3
* DynamoDB
* RDS
* Other AWS services used by the app

### âŒ Common failure

* Missing IAM role
* Incorrect policy attached

### âœ… Why it matters

App may load but **crash internally** due to denied access

---

## âœ… 9. Personal / Corporate Network Restrictions

### ğŸ” What to check

* Are you on a corporate VPN?
* Is outbound traffic restricted?

### âŒ Common failure

* Firewall blocks ports 80/443
* Proxy blocks unknown IP ranges

### âœ… Quick test

Try accessing from:

* Mobile hotspot
* Different network

---

## âœ… 10. Application & Web Server Health

### ğŸ” What to check

* Is the app actually running?
* Is Apache/Nginx started?

Example:

```bash
sudo systemctl status nginx
sudo systemctl status httpd
```

Check:

* Application logs
* Web server logs

### âŒ Common failures

* Service not started
* App crashed on launch
* Wrong document root

---

# ğŸ§  Fast Exam / Real-World Checklist (Order Matters!)

1ï¸âƒ£ Internet Gateway
2ï¸âƒ£ Route Table
3ï¸âƒ£ Security Group
4ï¸âƒ£ Network ACL
5ï¸âƒ£ Public IP
6ï¸âƒ£ HTTP vs HTTPS
7ï¸âƒ£ User Data
8ï¸âƒ£ IAM Permissions
9ï¸âƒ£ Your Network
ğŸ”Ÿ Application itself

---

## ğŸ§  One-Line Summary

> **If a public EC2 app doesnâ€™t load, always debug from the network edge inward â€” not the other way around.**
