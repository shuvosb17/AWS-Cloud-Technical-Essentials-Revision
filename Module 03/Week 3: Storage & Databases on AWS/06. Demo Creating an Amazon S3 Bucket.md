## ğŸ§ª **Demo: Creating an Amazon S3 Bucket (Step-by-Step, Big Picture)**

*(From zero â†’ working S3 â†’ connected to EC2 application)*

![Image](https://media.geeksforgeeks.org/wp-content/uploads/20211222232902/AWS2edited.jpg)

![Image](https://d2908q01vomqb2.cloudfront.net/1b6453892473a467d07372d45eb05abc2031647a/2023/02/22/multipartupload.png)

![Image](https://s3browser.com/images/bucket-policy/policy-editor-dialog.png)

![Image](https://i.sstatic.net/nCN0D.png)

This demo is **super important** because it ties together **storage + IAM + EC2 + application configuration**.
Letâ€™s break it down **visually, logically, and exam-ready** ğŸ‘‡

---

# ğŸ§  What Are We Doing? (Mental Map)

```
Employee Directory App
        â”‚
        â–¼
Needs to store employee photos
        â”‚
        â–¼
Create Amazon S3 bucket
        â”‚
        â–¼
Give EC2 permission to access bucket
        â”‚
        â–¼
Update EC2 app config to use S3
```

---

# ğŸ¥‡ Step 1: Create the S3 Bucket

### ğŸ”§ Where?

* AWS Management Console â†’ Search **S3**

### âœ… Actions

1. Click **Create bucket**

2. Bucket name:

   ```
   employee-photo-bucket-<your-initials>-<random-number>
   ```

   âœ” Must be **globally unique**
   âœ” DNS-compliant (no spaces, no capitals)

3. **Region**

   * Choose **same region as EC2**
   * Example: **Oregon (us-west-2)**

4. Leave all other settings as **default**

5. Click **Create bucket**

ğŸ¯ **Why same region?**

* Lower latency
* No cross-region data transfer cost
* Best practice

ğŸ“¦ Entity: **Amazon S3**

---

# ğŸ¥ˆ Step 2: Upload a Test Object (Sanity Check)

### ğŸ”§ Purpose

âœ” Verify bucket works
âœ” Confirm permissions later

### âœ… Actions

1. Click bucket name
2. Click **Upload**
3. **Add files**
4. Upload an employee photo
5. Click **Upload**

âœ” Upload successful â†’ bucket is working

---

# ğŸ¥‰ Step 3: Secure Access with a Bucket Policy (âš ï¸ Critical)

### â— Key Concept

> **S3 is private by default**
> We do **NOT** want public access.
> We want **ONLY the application** to access it.

---

## ğŸ” Why Bucket Policy (Not Public Access)?

| Option                   | Result             |
| ------------------------ | ------------------ |
| Public bucket            | âŒ Security risk    |
| IAM user only            | âŒ App canâ€™t access |
| Bucket Policy + IAM Role | âœ… Correct          |

---

### âœ… Actions

1. Go to **Permissions** tab
2. Scroll to **Bucket policy**
3. Click **Edit**
4. Paste policy from lab instructions
5. **Modify carefully**:

   * Replace:

     ```
     <ACCOUNT-ID>
     <BUCKET-NAME>
     ```
   * Remove `< >` brackets
6. Click **Save changes**

ğŸ¯ Result:

* EC2 **IAM role** now has access
* Bucket still **not public**

---

# ğŸ—ï¸ Step 4: Clone the EC2 Instance (Best Practice)

Instead of redoing everything manually ğŸ‘‡
We **clone** the existing instance.

ğŸ“¦ Entity: **Amazon EC2**

### âœ… Actions

1. Go to **EC2 â†’ Instances**
2. Select **stopped instance**
3. Click:

   ```
   Actions â†’ Image and templates â†’ Launch more like this
   ```

ğŸ¯ Why this is smart:

* Keeps networking
* Keeps security groups
* Keeps IAM role
* Saves time

---

# ğŸ·ï¸ Step 5: Update Instance Settings

### Key changes

* **Instance name**

  ```
  employee-directory-app-s3
  ```

* **Auto-assign Public IP**

  ```
  ENABLED
  ```

---

# ğŸ§© Step 6: Update User Data (VERY IMPORTANT)

### ğŸ”§ Where?

* **Advanced details â†’ User data**

### âœ… Action

* Insert **S3 bucket name** into user data script

ğŸ’¡ This tells the application:

> â€œStore and fetch images from THIS bucketâ€

---

# ğŸš€ Step 7: Launch & Verify

### âœ… Actions

1. Launch instance
2. Wait for:

   ```
   Status checks: 2/2 passed
   ```
3. Copy **Public IP**
4. Open in browser

ğŸ‰ Result:

* App loads successfully
* Images now backed by S3
* Database comes later

---

# ğŸ§¹ Step 8: Cleanup (Cost Control âš ï¸)

Always do this after labs ğŸ‘‡

### âœ… Actions

* Stop EC2 instance
* Delete uploaded S3 object

ğŸ’° Prevents accidental charges

---

# ğŸ§  Big Picture Summary (Exam Gold)

```
EC2 (Compute)
  â”‚
  â”‚ IAM Role
  â–¼
S3 Bucket (Private)
  â”‚
  â””â”€â”€ Employee Photos
```

---

# ğŸ”‘ Key Takeaways to Remember

* S3 buckets are **region-specific**
* Bucket names are **globally unique**
* **Never** make buckets public unless required
* Use **bucket policies** for application access
* EC2 apps often read S3 config from **user data**
* â€œLaunch more like thisâ€ = â­ real-world trick

